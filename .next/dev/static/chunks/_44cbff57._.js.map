{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omvat/OneDrive/Desktop/Dayflow/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Missing Supabase credentials')\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omvat/OneDrive/Desktop/Dayflow/components/CompanyCreationModal.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface CompanyCreationModalProps {\r\n  userId: string\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onCompanyCreated: () => void\r\n}\r\n\r\nexport function CompanyCreationModal({\r\n  userId,\r\n  isOpen,\r\n  onClose: _onClose,\r\n  onCompanyCreated,\r\n}: CompanyCreationModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    industry: '',\r\n    employees_count: '1',\r\n  })\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n  const router = useRouter()\r\n\r\n  function handleChange(e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) {\r\n    const { name, value } = e.target\r\n    setFormData((prev) => ({ ...prev, [name]: value }))\r\n  }\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      const { data, error: insertError } = await supabase\r\n        .from('companies')\r\n        .insert({\r\n          name: formData.name,\r\n          email: formData.email,\r\n          industry: formData.industry,\r\n          employees_count: parseInt(formData.employees_count),\r\n          owner_id: userId,\r\n        })\r\n        .select()\r\n        .single()\r\n\r\n      if (insertError) {\r\n        setError('Failed to create company')\r\n        return\r\n      }\r\n\r\n      // Store company ID in session storage\r\n      if (data) {\r\n        sessionStorage.setItem('company_id', data.id)\r\n        onCompanyCreated()\r\n        router.push('/dashboard/employee')\r\n      }\r\n    } catch (err) {\r\n      setError('An unexpected error occurred')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-8 max-w-md w-full\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-gray-900 dark:text-white\">\r\n          Create Your Company\r\n        </h2>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 rounded-lg text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Company Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={formData.name}\r\n              onChange={handleChange}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Company Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Industry\r\n            </label>\r\n            <select\r\n              name=\"industry\"\r\n              value={formData.industry}\r\n              onChange={handleChange}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            >\r\n              <option value=\"\">Select industry</option>\r\n              <option value=\"Technology\">Technology</option>\r\n              <option value=\"Finance\">Finance</option>\r\n              <option value=\"Healthcare\">Healthcare</option>\r\n              <option value=\"Retail\">Retail</option>\r\n              <option value=\"Manufacturing\">Manufacturing</option>\r\n              <option value=\"Other\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Expected Employees\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"employees_count\"\r\n              value={formData.employees_count}\r\n              onChange={handleChange}\r\n              min=\"1\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-2 rounded-lg transition\"\r\n          >\r\n            {loading ? 'Creating...' : 'Create Company'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/omvat/OneDrive/Desktop/Dayflow/components/OnboardingPage.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { CompanyCreationModal } from '@/components/CompanyCreationModal'\r\nimport type { Database } from '@/types/supabase'\r\n\r\ntype Company = Database['public']['Tables']['companies']['Row']\r\n\r\ninterface OnboardingPageProps {\r\n  userId?: string\r\n}\r\n\r\nexport function OnboardingPage({ userId: _userId }: OnboardingPageProps) {\r\n  const router = useRouter()\r\n  const [user, setUser] = useState<any>(null)\r\n  const [companies, setCompanies] = useState<Company[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [showCreateModal, setShowCreateModal] = useState(false)\r\n\r\n  useEffect(() => {\r\n    async function initializeUser() {\r\n      try {\r\n        // Get current user\r\n        const {\r\n          data: { user: authUser },\r\n        } = await supabase.auth.getUser()\r\n\r\n        if (!authUser) {\r\n          router.push('/login')\r\n          return\r\n        }\r\n\r\n        setUser(authUser)\r\n\r\n        // Fetch user's companies\r\n        const { data: userCompanies } = await supabase\r\n          .from('companies')\r\n          .select('*')\r\n          .or(`owner_id.eq.${authUser.id},employees.contains.${JSON.stringify([authUser.id])}`)\r\n\r\n        setCompanies(userCompanies || [])\r\n\r\n        // If user has no companies, show create modal\r\n        if (!userCompanies || userCompanies.length === 0) {\r\n          setShowCreateModal(true)\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to initialize user:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    initializeUser()\r\n  }, [router])\r\n\r\n  async function selectCompany(companyId: string) {\r\n    sessionStorage.setItem('company_id', companyId)\r\n    router.push('/dashboard/employee')\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600 dark:text-gray-300\">Loading your workspace...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\r\n      <div className=\"max-w-4xl mx-auto px-4 py-16\">\r\n        <div className=\"text-center mb-12\">\r\n          <h1 className=\"text-4xl font-bold text-gray-900 dark:text-white mb-4\">\r\n            Welcome to Dayflow\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300\">\r\n            Select a company to access your dashboard or create a new one\r\n          </p>\r\n        </div>\r\n\r\n        {companies.length > 0 && (\r\n          <div className=\"mb-12\">\r\n            <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white mb-6\">\r\n              Your Companies\r\n            </h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {companies.map((company: Company) => (\r\n                <div\r\n                  key={company.id}\r\n                  className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer\"\r\n                  onClick={() => selectCompany(company.id)}\r\n                >\r\n                  <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n                    {company.name}\r\n                  </h3>\r\n                  <p className=\"text-gray-600 dark:text-gray-400 mb-4\">{company.email}</p>\r\n                  <div className=\"flex justify-between text-sm text-gray-500 dark:text-gray-400\">\r\n                    <span>{company.industry}</span>\r\n                    <span>{company.employees_count} employees</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"text-center\">\r\n          <button\r\n            onClick={() => setShowCreateModal(true)}\r\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition inline-block\"\r\n          >\r\n            Create New Company\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {user && (\r\n        <CompanyCreationModal\r\n          userId={user.id}\r\n          isOpen={showCreateModal}\r\n          onClose={() => setShowCreateModal(false)}\r\n          onCompanyCreated={() => {\r\n            setShowCreateModal(false)\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAcO,SAAS,eAAe,EAAE,QAAQ,OAAO,EAAuB;;IACrE,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAM;IACtC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAY,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IAEvD,IAAA,0KAAS;oCAAC;YACR,eAAe;gBACb,IAAI;oBACF,mBAAmB;oBACnB,MAAM,EACJ,MAAM,EAAE,MAAM,QAAQ,EAAE,EACzB,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;oBAE/B,IAAI,CAAC,UAAU;wBACb,OAAO,IAAI,CAAC;wBACZ;oBACF;oBAEA,QAAQ;oBAER,yBAAyB;oBACzB,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,8HAAQ,CAC3C,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,CAAC,YAAY,EAAE,SAAS,EAAE,CAAC,oBAAoB,EAAE,KAAK,SAAS,CAAC;wBAAC,SAAS,EAAE;qBAAC,GAAG;oBAEtF,aAAa,iBAAiB,EAAE;oBAEhC,8CAA8C;oBAC9C,IAAI,CAAC,iBAAiB,cAAc,MAAM,KAAK,GAAG;wBAChD,mBAAmB;oBACrB;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,8BAA8B;gBAC9C,SAAU;oBACR,WAAW;gBACb;YACF;YAEA;QACF;mCAAG;QAAC;KAAO;IAEX,eAAe,cAAc,SAAiB;QAC5C,eAAe,OAAO,CAAC,cAAc;QACrC,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;;;;;;IAI7D;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAwD;;;;;;0CAGtE,6LAAC;gCAAE,WAAU;0CAAmC;;;;;;;;;;;;oBAKjD,UAAU,MAAM,GAAG,mBAClB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA4D;;;;;;0CAG1E,6LAAC;gCAAI,WAAU;0CACZ,UAAU,GAAG,CAAC,CAAC,wBACd,6LAAC;wCAEC,WAAU;wCACV,SAAS,IAAM,cAAc,QAAQ,EAAE;;0DAEvC,6LAAC;gDAAG,WAAU;0DACX,QAAQ,IAAI;;;;;;0DAEf,6LAAC;gDAAE,WAAU;0DAAyC,QAAQ,KAAK;;;;;;0DACnE,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;kEAAM,QAAQ,QAAQ;;;;;;kEACvB,6LAAC;;4DAAM,QAAQ,eAAe;4DAAC;;;;;;;;;;;;;;uCAV5B,QAAQ,EAAE;;;;;;;;;;;;;;;;kCAkBzB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,SAAS,IAAM,mBAAmB;4BAClC,WAAU;sCACX;;;;;;;;;;;;;;;;;YAMJ,sBACC,6LAAC,8JAAoB;gBACnB,QAAQ,KAAK,EAAE;gBACf,QAAQ;gBACR,SAAS,IAAM,mBAAmB;gBAClC,kBAAkB;oBAChB,mBAAmB;gBACrB;;;;;;;;;;;;AAKV;GAxHgB;;QACC,kJAAS;;;KADV"}}]
}