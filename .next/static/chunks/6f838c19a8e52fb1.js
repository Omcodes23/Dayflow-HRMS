(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},61961,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(17927);function n({userId:e,isOpen:n,onClose:i,onCompanyCreated:l}){let[o,d]=(0,a.useState)({name:"",email:"",industry:"",employees_count:"1"}),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),g=(0,r.useRouter)();function y(e){let{name:t,value:a}=e.target;d(e=>({...e,[t]:a}))}async function b(t){t.preventDefault(),u(!0),x("");try{let{data:t,error:a}=await s.supabase.from("companies").insert({name:o.name,email:o.email,industry:o.industry,employees_count:parseInt(o.employees_count),owner_id:e}).select().single();if(a)return void x("Failed to create company");t&&(sessionStorage.setItem("company_id",t.id),l(),g.push("/dashboard/employee"))}catch(e){x("An unexpected error occurred")}finally{u(!1)}}return n?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-8 max-w-md w-full",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Create Your Company"}),m&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 rounded-lg text-sm",children:m}),(0,t.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:o.name,onChange:y,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:o.email,onChange:y,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Industry"}),(0,t.jsxs)("select",{name:"industry",value:o.industry,onChange:y,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select industry"}),(0,t.jsx)("option",{value:"Technology",children:"Technology"}),(0,t.jsx)("option",{value:"Finance",children:"Finance"}),(0,t.jsx)("option",{value:"Healthcare",children:"Healthcare"}),(0,t.jsx)("option",{value:"Retail",children:"Retail"}),(0,t.jsx)("option",{value:"Manufacturing",children:"Manufacturing"}),(0,t.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Expected Employees"}),(0,t.jsx)("input",{type:"number",name:"employees_count",value:o.employees_count,onChange:y,min:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-2 rounded-lg transition",children:c?"Creating...":"Create Company"})]})]})}):null}function i({userId:e}){let i=(0,r.useRouter)(),[l,o]=(0,a.useState)(null),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[x,g]=(0,a.useState)(!1);async function y(e){sessionStorage.setItem("company_id",e),i.push("/dashboard/employee")}return((0,a.useEffect)(()=>{!async function(){try{let{data:{user:e}}=await s.supabase.auth.getUser();if(!e)return void i.push("/login");o(e);let{data:t}=await s.supabase.from("companies").select("*").or(`owner_id.eq.${e.id},employees.contains.${JSON.stringify([e.id])}`);c(t||[]),t&&0!==t.length||g(!0)}catch(e){console.error("Failed to initialize user:",e)}finally{m(!1)}}()},[i]),u)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading your workspace..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Welcome to Dayflow"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Select a company to access your dashboard or create a new one"})]}),d.length>0&&(0,t.jsxs)("div",{className:"mb-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Your Companies"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(e=>(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>y(e.id),children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e.email}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("span",{children:e.industry}),(0,t.jsxs)("span",{children:[e.employees_count," employees"]})]})]},e.id))})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("button",{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition inline-block",children:"Create New Company"})})]}),l&&(0,t.jsx)(n,{userId:l.id,isOpen:x,onClose:()=>g(!1),onCompanyCreated:()=>{g(!1)}})]})}e.s(["OnboardingPage",()=>i],61961)}]);