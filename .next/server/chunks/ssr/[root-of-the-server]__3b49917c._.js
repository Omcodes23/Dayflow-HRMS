module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},25712,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560);function f({user:a}){return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Profile"}),a?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Name:"})," ",a.name]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Employee ID:"})," ",a.employee_id]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Email:"})," ",a.email]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Phone:"})," ",a.phone]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Address:"})," ",a.address]})]}):(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})}function g({userId:a}){let[d,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1);async function k(){let b=new Date().toISOString().split("T")[0],{data:c}=await e.supabase.from("attendance").select("*").eq("user_id",a).eq("date",b).single();c&&(h(c),f(!!c.check_in))}async function l(){j(!0);let b=new Date().toISOString(),c=new Date().toISOString().split("T")[0];if(!g){let{error:d}=await e.supabase.from("attendance").insert({user_id:a,date:c,check_in:b,status:"present"});d||(f(!0),await k())}j(!1)}async function m(){j(!0);let a=new Date().toISOString();if(g){let{error:b}=await e.supabase.from("attendance").update({check_out:a}).eq("id",g.id);b||await k()}j(!1)}return(0,c.useEffect)(()=>{k()},[a]),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Attendance"}),(0,b.jsxs)("div",{className:"space-y-4",children:[g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Check In:"})," ",g.check_in?new Date(g.check_in).toLocaleTimeString():"Not checked in"]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Check Out:"})," ",g.check_out?new Date(g.check_out).toLocaleTimeString():"Not checked out"]}),(0,b.jsxs)("p",{className:"text-gray-700",children:[(0,b.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,b.jsx)("span",{className:"capitalize",children:g.status})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)("button",{onClick:l,disabled:d||i,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition disabled:bg-gray-400",children:"Check In"}),(0,b.jsx)("button",{onClick:m,disabled:!d||!!g?.check_out||i,className:"flex-1 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition disabled:bg-gray-400",children:"Check Out"})]})]})]})}function h({userId:a,leaveRequests:d,onRefresh:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)({fromDate:"",toDate:"",type:"paid",remarks:""});function m(a){let{name:b,value:c}=a.target;l(a=>({...a,[b]:c}))}async function n(b){b.preventDefault(),j(!0);let{error:c}=await e.supabase.from("leave_requests").insert({user_id:a,from_date:k.fromDate,to_date:k.toDate,type:k.type,remarks:k.remarks,status:"pending"});c||(l({fromDate:"",toDate:"",type:"paid",remarks:""}),h(!1),await f()),j(!1)}return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Leave Requests"}),d.length>0?(0,b.jsx)("div",{className:"space-y-3 mb-4",children:d.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:[new Date(a.from_date).toLocaleDateString()," -"," ",new Date(a.to_date).toLocaleDateString()]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 capitalize",children:[a.type," Â· ",a.status]})]},a.id))}):(0,b.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:"No leave requests yet"}),g?(0,b.jsxs)("form",{onSubmit:n,className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,b.jsx)("input",{type:"date",name:"fromDate",value:k.fromDate,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,b.jsx)("input",{type:"date",name:"toDate",value:k.toDate,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,b.jsxs)("select",{name:"type",value:k.type,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,b.jsx)("option",{value:"paid",children:"Paid Leave"}),(0,b.jsx)("option",{value:"sick",children:"Sick Leave"}),(0,b.jsx)("option",{value:"unpaid",children:"Unpaid Leave"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),(0,b.jsx)("textarea",{name:"remarks",value:k.remarks,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",rows:2})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition disabled:bg-gray-400",children:"Submit"}),(0,b.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition",children:"Cancel"})]})]}):(0,b.jsx)("button",{onClick:()=>h(!0),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"Request Leave"})]})}function i(){let a=(0,d.useRouter)(),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0);async function o(a){let{data:b}=await e.supabase.from("leave_requests").select("*").eq("user_id",a).order("created_at",{ascending:!1});l(b||[])}async function p(){await e.supabase.auth.signOut(),a.push("/")}return((0,c.useEffect)(()=>{(async()=>{let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return a.push("/auth/login");let{data:c}=await e.supabase.from("users").select("*").eq("id",b.id).single();c?.role!=="employee"?a.push("/dashboard/hr"):(j(c),await o(b.id),n(!1))})()},[a]),m)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Employee Dashboard"}),(0,b.jsx)("button",{onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Logout"})]})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,b.jsx)(f,{user:i}),(0,b.jsx)(g,{userId:i?.id||""}),(0,b.jsx)(h,{userId:i?.id||"",leaveRequests:k,onRefresh:()=>o(i?.id||"")})]})})]})}a.s(["default",()=>i],25712)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__3b49917c._.js.map