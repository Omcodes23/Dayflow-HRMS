module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},16014,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560);function f({userId:a,isOpen:f,onClose:g,onCompanyCreated:h}){let[i,j]=(0,c.useState)({name:"",email:"",industry:"",employees_count:"1"}),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),o=(0,d.useRouter)();function p(a){let{name:b,value:c}=a.target;j(a=>({...a,[b]:c}))}async function q(b){b.preventDefault(),l(!0),n("");try{let{data:b,error:c}=await e.supabase.from("companies").insert({name:i.name,email:i.email,industry:i.industry,employees_count:parseInt(i.employees_count),owner_id:a}).select().single();if(c)return void n("Failed to create company");b&&(sessionStorage.setItem("company_id",b.id),h(),o.push("/dashboard/employee"))}catch(a){n("An unexpected error occurred")}finally{l(!1)}}return f?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-8 max-w-md w-full",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Create Your Company"}),m&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 rounded-lg text-sm",children:m}),(0,b.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Name"}),(0,b.jsx)("input",{type:"text",name:"name",value:i.name,onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Email"}),(0,b.jsx)("input",{type:"email",name:"email",value:i.email,onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Industry"}),(0,b.jsxs)("select",{name:"industry",value:i.industry,onChange:p,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select industry"}),(0,b.jsx)("option",{value:"Technology",children:"Technology"}),(0,b.jsx)("option",{value:"Finance",children:"Finance"}),(0,b.jsx)("option",{value:"Healthcare",children:"Healthcare"}),(0,b.jsx)("option",{value:"Retail",children:"Retail"}),(0,b.jsx)("option",{value:"Manufacturing",children:"Manufacturing"}),(0,b.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Expected Employees"}),(0,b.jsx)("input",{type:"number",name:"employees_count",value:i.employees_count,onChange:p,min:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-2 rounded-lg transition",children:k?"Creating...":"Create Company"})]})]})}):null}function g({userId:a}){let g=(0,d.useRouter)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1);async function p(a){sessionStorage.setItem("company_id",a),g.push("/dashboard/employee")}return((0,c.useEffect)(()=>{!async function(){try{let{data:{user:a}}=await e.supabase.auth.getUser();if(!a)return void g.push("/login");i(a);let{data:b}=await e.supabase.from("companies").select("*").or(`owner_id.eq.${a.id},employees.contains.${JSON.stringify([a.id])}`);k(b||[]),b&&0!==b.length||o(!0)}catch(a){console.error("Failed to initialize user:",a)}finally{m(!1)}}()},[g]),l)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading your workspace..."})]})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Welcome to Dayflow"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Select a company to access your dashboard or create a new one"})]}),j.length>0&&(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Your Companies"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:j.map(a=>(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",onClick:()=>p(a.id),children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:a.name}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:a.email}),(0,b.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,b.jsx)("span",{children:a.industry}),(0,b.jsxs)("span",{children:[a.employees_count," employees"]})]})]},a.id))})]}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition inline-block",children:"Create New Company"})})]}),h&&(0,b.jsx)(f,{userId:h.id,isOpen:n,onClose:()=>o(!1),onCompanyCreated:()=>{o(!1)}})]})}a.s(["OnboardingPage",()=>g],16014)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ad7c387d._.js.map