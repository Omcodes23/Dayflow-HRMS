{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../components/OnboardingPage.tsx","../../../../components/CompanyCreationModal.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { CompanyCreationModal } from '@/components/CompanyCreationModal'\r\nimport type { Database } from '@/types/supabase'\r\n\r\ntype Company = Database['public']['Tables']['companies']['Row']\r\n\r\ninterface OnboardingPageProps {\r\n  userId?: string\r\n}\r\n\r\nexport function OnboardingPage({ userId: _userId }: OnboardingPageProps) {\r\n  const router = useRouter()\r\n  const [user, setUser] = useState<any>(null)\r\n  const [companies, setCompanies] = useState<Company[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [showCreateModal, setShowCreateModal] = useState(false)\r\n\r\n  useEffect(() => {\r\n    async function initializeUser() {\r\n      try {\r\n        // Get current user\r\n        const {\r\n          data: { user: authUser },\r\n        } = await supabase.auth.getUser()\r\n\r\n        if (!authUser) {\r\n          router.push('/login')\r\n          return\r\n        }\r\n\r\n        setUser(authUser)\r\n\r\n        // Fetch user's companies\r\n        const { data: userCompanies } = await supabase\r\n          .from('companies')\r\n          .select('*')\r\n          .or(`owner_id.eq.${authUser.id},employees.contains.${JSON.stringify([authUser.id])}`)\r\n\r\n        setCompanies(userCompanies || [])\r\n\r\n        // If user has no companies, show create modal\r\n        if (!userCompanies || userCompanies.length === 0) {\r\n          setShowCreateModal(true)\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to initialize user:', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    initializeUser()\r\n  }, [router])\r\n\r\n  async function selectCompany(companyId: string) {\r\n    sessionStorage.setItem('company_id', companyId)\r\n    router.push('/dashboard/employee')\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n          <p className=\"mt-4 text-gray-600 dark:text-gray-300\">Loading your workspace...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\r\n      <div className=\"max-w-4xl mx-auto px-4 py-16\">\r\n        <div className=\"text-center mb-12\">\r\n          <h1 className=\"text-4xl font-bold text-gray-900 dark:text-white mb-4\">\r\n            Welcome to Dayflow\r\n          </h1>\r\n          <p className=\"text-gray-600 dark:text-gray-300\">\r\n            Select a company to access your dashboard or create a new one\r\n          </p>\r\n        </div>\r\n\r\n        {companies.length > 0 && (\r\n          <div className=\"mb-12\">\r\n            <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-white mb-6\">\r\n              Your Companies\r\n            </h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {companies.map((company: Company) => (\r\n                <div\r\n                  key={company.id}\r\n                  className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer\"\r\n                  onClick={() => selectCompany(company.id)}\r\n                >\r\n                  <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\r\n                    {company.name}\r\n                  </h3>\r\n                  <p className=\"text-gray-600 dark:text-gray-400 mb-4\">{company.email}</p>\r\n                  <div className=\"flex justify-between text-sm text-gray-500 dark:text-gray-400\">\r\n                    <span>{company.industry}</span>\r\n                    <span>{company.employees_count} employees</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"text-center\">\r\n          <button\r\n            onClick={() => setShowCreateModal(true)}\r\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition inline-block\"\r\n          >\r\n            Create New Company\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {user && (\r\n        <CompanyCreationModal\r\n          userId={user.id}\r\n          isOpen={showCreateModal}\r\n          onClose={() => setShowCreateModal(false)}\r\n          onCompanyCreated={() => {\r\n            setShowCreateModal(false)\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n","'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface CompanyCreationModalProps {\r\n  userId: string\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onCompanyCreated: () => void\r\n}\r\n\r\nexport function CompanyCreationModal({\r\n  userId,\r\n  isOpen,\r\n  onClose: _onClose,\r\n  onCompanyCreated,\r\n}: CompanyCreationModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    industry: '',\r\n    employees_count: '1',\r\n  })\r\n  const [loading, setLoading] = useState(false)\r\n  const [error, setError] = useState('')\r\n  const router = useRouter()\r\n\r\n  function handleChange(e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) {\r\n    const { name, value } = e.target\r\n    setFormData((prev) => ({ ...prev, [name]: value }))\r\n  }\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    setError('')\r\n\r\n    try {\r\n      const { data, error: insertError } = await supabase\r\n        .from('companies')\r\n        .insert({\r\n          name: formData.name,\r\n          email: formData.email,\r\n          industry: formData.industry,\r\n          employees_count: parseInt(formData.employees_count),\r\n          owner_id: userId,\r\n        })\r\n        .select()\r\n        .single()\r\n\r\n      if (insertError) {\r\n        setError('Failed to create company')\r\n        return\r\n      }\r\n\r\n      // Store company ID in session storage\r\n      if (data) {\r\n        sessionStorage.setItem('company_id', data.id)\r\n        onCompanyCreated()\r\n        router.push('/dashboard/employee')\r\n      }\r\n    } catch (err) {\r\n      setError('An unexpected error occurred')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-gray-900 rounded-lg shadow-lg p-8 max-w-md w-full\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-gray-900 dark:text-white\">\r\n          Create Your Company\r\n        </h2>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 rounded-lg text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Company Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={formData.name}\r\n              onChange={handleChange}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Company Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Industry\r\n            </label>\r\n            <select\r\n              name=\"industry\"\r\n              value={formData.industry}\r\n              onChange={handleChange}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            >\r\n              <option value=\"\">Select industry</option>\r\n              <option value=\"Technology\">Technology</option>\r\n              <option value=\"Finance\">Finance</option>\r\n              <option value=\"Healthcare\">Healthcare</option>\r\n              <option value=\"Retail\">Retail</option>\r\n              <option value=\"Manufacturing\">Manufacturing</option>\r\n              <option value=\"Other\">Other</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Expected Employees\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"employees_count\"\r\n              value={formData.employees_count}\r\n              onChange={handleChange}\r\n              min=\"1\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            className=\"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-2 rounded-lg transition\"\r\n          >\r\n            {loading ? 'Creating...' : 'Create Company'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}