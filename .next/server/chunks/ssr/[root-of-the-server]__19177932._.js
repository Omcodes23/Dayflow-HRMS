module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},27781,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560);function f({onSelectEmployee:a,selectedId:d}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0);async function j(){let{data:a}=await e.supabase.from("users").select("*").eq("role","employee");g(a||[]),i(!1)}return((0,c.useEffect)(()=>{j()},[]),h)?(0,b.jsx)("p",{className:"text-gray-500",children:"Loading employees..."}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Employees"})}),(0,b.jsx)("div",{className:"divide-y max-h-96 overflow-y-auto",children:f.map(c=>(0,b.jsxs)("button",{onClick:()=>a(c),className:`w-full text-left p-4 hover:bg-gray-50 transition ${d===c.id?"bg-blue-50 border-l-4 border-blue-600":""}`,children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:c.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:c.employee_id})]},c.id))})]})}function g({employeeId:a}){let[d,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0);async function i(){h(!0);let{data:b}=await e.supabase.from("attendance").select("*").eq("user_id",a).order("date",{ascending:!1}).limit(10);f(b||[]),h(!1)}return((0,c.useEffect)(()=>{i()},[a]),g)?(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Attendance"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900",children:"Check In"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900",children:"Check Out"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900",children:"Status"})]})}),(0,b.jsx)("tbody",{children:d.map(a=>(0,b.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:new Date(a.date).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.check_in?new Date(a.check_in).toLocaleTimeString():"-"}),(0,b.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.check_out?new Date(a.check_out).toLocaleTimeString():"-"}),(0,b.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,b.jsx)("span",{className:"px-2 py-1 bg-gray-200 text-gray-800 rounded capitalize text-xs font-medium",children:a.status})})]},a.id))})]})})]})}function h(){let[a,d]=(0,c.useState)([]),[f,g]=(0,c.useState)(!0);async function h(){let{data:a}=await e.supabase.from("leave_requests").select("*, users(name, employee_id)").eq("status","pending").order("created_at",{ascending:!1});d(a||[]),g(!1)}async function i(a){let{error:b}=await e.supabase.from("leave_requests").update({status:"approved"}).eq("id",a);b||await h()}async function j(a){let{error:b}=await e.supabase.from("leave_requests").update({status:"rejected"}).eq("id",a);b||await h()}return((0,c.useEffect)(()=>{h()},[]),f)?(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Leave Approvals"})}),(0,b.jsx)("div",{className:"divide-y",children:a.length>0?a.map(a=>(0,b.jsxs)("div",{className:"p-4 hover:bg-gray-50",children:[(0,b.jsxs)("p",{className:"font-medium text-gray-900",children:[a.users?.name," (",a.users?.employee_id,")"]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(a.from_date).toLocaleDateString()," -"," ",new Date(a.to_date).toLocaleDateString()]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,b.jsx)("span",{className:"capitalize font-medium",children:a.type})," Leave"]}),a.remarks&&(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Remarks: ",a.remarks]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,b.jsx)("button",{onClick:()=>i(a.id),className:"flex-1 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition",children:"Approve"}),(0,b.jsx)("button",{onClick:()=>j(a.id),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition",children:"Reject"})]})]},a.id)):(0,b.jsx)("p",{className:"p-4 text-gray-500 text-sm",children:"No pending leave requests"})})]})}function i({employeeId:a}){let[d,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!0);async function i(){let{data:b}=await e.supabase.from("users").select("*").eq("id",a).single();f(b),h(!1)}if((0,c.useEffect)(()=>{i()},[a]),g)return(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."});if(!d)return(0,b.jsx)("p",{className:"text-gray-500",children:"Employee not found"});let j=d.salary,k=.08*j;return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Payroll Details"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Basic Salary"}),(0,b.jsxs)("span",{className:"font-medium",children:["₹",(.6*j).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"HRA"}),(0,b.jsxs)("span",{className:"font-medium",children:["₹",(.2*j).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Dearness Allowance"}),(0,b.jsxs)("span",{className:"font-medium",children:["₹",(.1*j).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b border-red-300",children:[(0,b.jsx)("span",{className:"text-gray-700",children:"Deductions"}),(0,b.jsxs)("span",{className:"font-medium text-red-600",children:["-₹",k.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between py-3 bg-blue-50 px-3 rounded",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:"Net Salary"}),(0,b.jsxs)("span",{className:"font-bold text-blue-600 text-lg",children:["₹",(j-k).toFixed(2)]})]})]})]})}function j(){let a=(0,d.useRouter)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0);async function n(){await e.supabase.auth.signOut(),a.push("/")}return((0,c.useEffect)(()=>{(async()=>{let{data:{user:b}}=await e.supabase.auth.getUser();if(!b)return a.push("/auth/login");let{data:c}=await e.supabase.from("users").select("*").eq("id",b.id).single();c?.role!=="hr"?a.push("/dashboard/employee"):m(!1)})()},[a]),l)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"HR Dashboard"}),(0,b.jsx)("button",{onClick:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Logout"})]})}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)(f,{onSelectEmployee:k,selectedId:j?.id})}),(0,b.jsxs)("div",{className:"lg:col-span-3 space-y-6",children:[j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{employeeId:j.id}),(0,b.jsx)(i,{employeeId:j.id})]}):(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:"Select an employee to view details"}),(0,b.jsx)(h,{})]})]})})]})}a.s(["default",()=>j],27781)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__19177932._.js.map